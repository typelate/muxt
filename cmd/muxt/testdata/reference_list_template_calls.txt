# Tests list-template-calls command showing what templates each template calls

muxt list-template-calls
stdout 'template "layout" calls:'
stdout 'template "GET / Page\(\)" calls:'

-- go.mod --
module server

go 1.22
-- template.go --
package server

import (
	"embed"
	"html/template"
	"io"
)

//go:embed *.gohtml
var templateSource embed.FS

var templates = template.Must(template.ParseFS(templateSource, "*"))

type T struct{}

func init() {
	_ = templates.ExecuteTemplate(io.Discard, "layout", T{})
	_ = templates.ExecuteTemplate(io.Discard, "GET / Page()", T{})
}
-- layout.gohtml --
{{define "layout"}}
<div>
{{template "header" .}}
{{template "footer" .}}
</div>
{{end}}

-- header.gohtml --
{{define "header"}}
<header>Header</header>
{{end}}

-- footer.gohtml --
{{define "footer"}}
<footer>Footer</footer>
{{end}}

-- page.gohtml --
{{define "GET / Page()"}}
{{template "layout" .}}
{{end}}
