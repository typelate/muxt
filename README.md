# Muxt [![Go Reference](https://pkg.go.dev/badge/github.com/typelate/muxt.svg)](https://pkg.go.dev/github.com/typelate/muxt) [![Go](https://github.com/typelate/muxt/actions/workflows/go.yml/badge.svg)](https://github.com/typelate/muxt/actions/workflows/go.yml)

**Muxt** generates and registers HTTP Handler functions specified in HTML templates.
It increases locality of behavior when creating server side rendered hypermedia web applications.

Muxt looks for templates with names that match an extended version of the `http.ServeMux` pattern syntax.

The standard `http.ServeMux` pattern syntax looks like this:

> `[METHOD ][HOST]/[PATH]`

Muxt extends this by adding optional fields for an HTTP status and a call:

> `[METHOD ][HOST]/[PATH][ HTTP_STATUS][ CALL]`

### Route Registration Example

You tell `muxt` how to generate the handler functions by defining templates like this `{{define "GET / F()" -}}`.
`muxt` will generate a handler function that calls F and pass the result to the template.
The template result will then be written to the HTTP response.

```html
{{define "GET / F()" -}}
<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'/>
    <title>Hello!</title>
</head>
<body>
<h1>Number {{.Result}}</h1>
</body>
</html>
{{- end}}
```

### Tiny Examples

`muxt` routes HTML templates to Go methods and handles common web plumbing:

* `{{define "GET /{id} F(id)"}}{{end}}` — Parses `{id}` as `int` and passes to `F(int)`.
* `{{define "GET / F(ctx)"}}{{end}}` — Injects `request.Context()` if `ctx` is used.
* `{{define "GET / F(request)"}}{{end}}` — Injects the `*http.Request` when `request` is named.
* `{{define "GET / F(response)"}}{{end}}` — Injects `http.ResponseWriter` if `response` is used.
* `{{define "POST / F(form)"}}{{end}}` — Parses form data into a struct from `url.Values` if the `form` parameter is a struct.
* `{{define "POST / F(form)"}}{{end}}` — Parses form data into a struct if the `form` parameter is a `url.Values`.

The result of the call is wrapped in a `TemplateData[T]` struct and passed to `ExecuteTemplate`.

### Bigger Examples

For a small runnable, see: [./example/hypertext/index.gohtml](./example/hypertext/index.gohtml)
The Go package documentation for the example shows what is generated `https://pkg.go.dev/github.com/typelate/muxt/example/hypertext`.

For larger complete examples, see:
- [Sortable Example](http://github.com/typelate/sortable-example)
- [HTMX Template](https://github.com/typelate/htmx-template)

## License

Muxt is licensed under the [GNU AGPLv3](LICENSE).

However, the Go code generated by `muxt` is **not** covered by the AGPL.
It is licensed under the MIT license (see `https://choosealicense.com/licenses/mit/`).
The code generated by `muxt` is provided as-is, without a warranty of any kind.
The `muxt` author disclaims all liability for any bugs, regressions, or defects in generated output.
## Muxt Documentation

Muxt generates type-safe HTTP handlers from Go HTML templates. This documentation is organized to help you find what you need quickly.

## Getting Started

**New to Muxt?** Start here:

- **[Tutorial: Your First Muxt Application](tutorials/getting-started.md)** - Build a "Hello, world!" app in 7 steps

## How-To Guides

**Need to accomplish a specific task?** These practical guides show you how:

- **[Integrate Muxt into an Existing Project](how-to/integrate-existing-project.md)** - Add Muxt to your current Go application
- **[Write Receiver Methods](how-to/write-receiver-methods.md)** - Create clean, testable handler methods
- **[Test Your Handlers](how-to/test-handlers.md)** - Test HTTP handlers with DOM-aware assertions
- **[Use HTMX with Muxt](how-to/use-htmx.md)** - Build dynamic interfaces with HTMX
- **[Add Logging to Generated Handlers](how-to/add-logging.md)** - Add structured logging with slog

## Reference

**Looking for technical details?** These documents provide complete specifications:

- **[CLI Reference](reference/cli.md)** - Complete command-line interface documentation
- **[Template Name Syntax](reference/template-names.md)** - Complete syntax for naming templates
- **[Call Parameters](reference/call-parameters.md)** - How Muxt parses method parameters
- **[Call Results](reference/call-results.md)** - How Muxt handles method return values
- **[Templates Variable](reference/templates-variable.md)** - Making templates discoverable for code generation
- **[Type Checking](reference/type-checking.md)** - Static analysis of template actions
- **[Known Issues](reference/known-issues.md)** - Current limitations and workarounds

## Explanation

**Want to understand the "why" behind Muxt?** These documents explain concepts and design decisions:

- **[Manifesto](explanation/manifesto.md)** - Muxt's core principles and design philosophy
- **[Motivation](explanation/motivation.md)** - Why Muxt was created
- **[Complexity is the Enemy](explanation/complexity-is-the-enemy.md)** - Why simple is better
- **[Go Proverbs and Muxt](explanation/go-proverbs-and-muxt.md)** - How Muxt embodies Go's design principles
- **[Advanced Patterns](explanation/advanced-patterns.md)** - Production patterns from real-world applications
- **[Package Structure](explanation/package-structure.md)** - Discussion of limitations and emergent patterns of package organization
- **[Architecture Decisions](explanation/decisions/)** - Records of key technical decisions

## Examples

Complete working examples:

- **[Hypertext Example](example/hypertext/)** - Full example application with tests
- **[HTMX Helpers](htmx/)** - Helper code for HTMX integration

## AI Assistant Prompts

Teaching materials for AI assistants and LLMs to help you build with Muxt:

- **[Quick Reference (muxt-quick.md)](prompts/muxt-quick.md)** - Essential syntax and patterns (~10KB)
  - Use when: You need a quick reminder or the LLM has limited context
  - Contains: Template syntax, TemplateData, basic patterns, minimal examples

- **[Practical Guide (muxt-guide.md)](prompts/muxt-guide.md)** - Comprehensive usage guide (~25KB)
  - Use when: Building features with moderate complexity
  - Contains: All HTTP methods, form handling, status codes, type parsing, CLI usage

- **[Complete Reference (muxt-complete.md)](prompts/muxt-complete.md)** - Full documentation (~50KB)
  - Use when: You need advanced features or comprehensive understanding
  - Contains: Design principles, testing patterns, HTMX integration, real examples, troubleshooting

**How to use these prompts:**

1. **For chat sessions**: Copy and paste the appropriate prompt at the start of your conversation
2. **For Claude Code**: Add as a project instruction or reference in your CLAUDE.md
3. **For other AI tools**: Include in context files

**Choosing the right prompt:**
- Small projects or quick questions → Quick Reference
- Most development work → Practical Guide
- Complex features or debugging → Complete Reference

---

## Quick Links by Task

### I want to...

**Learn Muxt from scratch**
→ [Tutorial: Your First Muxt Application](tutorials/getting-started.md)

**Add Muxt to my existing project**
→ [How to Integrate Muxt](how-to/integrate-existing-project.md)

**Understand template naming**
→ [Template Name Syntax Reference](reference/template-names.md)

**Make my handlers testable**
→ [How to Write Receiver Methods](how-to/write-receiver-methods.md)

**Test my HTML output**
→ [How to Test Handlers](how-to/test-handlers.md)

**Build interactive pages**
→ [How to Use HTMX](how-to/use-htmx.md)

**Add logging to my handlers**
→ [How to Add Logging](how-to/add-logging.md)

**See all CLI flags**
→ [CLI Reference](reference/cli.md)

**Understand Muxt's design**
→ [Manifesto](explanation/manifesto.md) & [Motivation](explanation/motivation.md)

**Learn advanced patterns**
→ [Advanced Patterns](explanation/advanced-patterns.md)

**See a complete example**
→ [Hypertext Example](example/hypertext/)

**Troubleshoot issues**
→ [Known Issues](reference/known-issues.md)

---

## Documentation Organization

This documentation follows the [Diátaxis framework](https://diataxis.fr/), organizing content by user needs:

- **Tutorials** are *learning-oriented* - they guide you through building something
- **How-to guides** are *goal-oriented* - they solve specific problems
- **Reference** is *information-oriented* - it describes the system accurately
- **Explanation** is *understanding-oriented* - it clarifies concepts and design

Choose the section that matches what you're trying to do.
